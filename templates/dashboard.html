{% extends "base.html" %}

{% block content %}
<style>
.dashboard {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  align-items: start;
}
.resume-panel, .jobs-panel {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
  padding: 2rem;
  max-height: 80vh;
  overflow-y: auto;
}
.resume-panel h2, .jobs-panel h2 {
  font-size: 1.5rem;
  color: #111;
  margin-bottom: 1rem;
}
.resume-panel p {
  line-height: 1.5;
  color: #333;
}
.job-card {
  border: 1px solid #eee;
  border-radius: 12px;
  margin-bottom: 1.5rem;
  padding: 1rem;
  transition: box-shadow .2s;
}
.job-card:hover {
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
}
.job-card h3 {
  margin: 0 0 .5rem;
  color: #111;
}
.job-card p {
  margin: .25rem 0;
  color: #555;
  font-size: .95rem;
}
.progress-bar {
  background: #eee;
  border-radius: 8px;
  height: 8px;
  overflow: hidden;
  margin-top: .5rem;
}
.progress {
  background: #111;
  height: 100%;
  width: 0;
  transition: width .8s ease;
}
.download-btn {
  display: inline-block;
  margin-top: 1rem;
  padding: .75rem 2rem;
  background: #111;
  color: #f5f5f5;
  border-radius: 50px;
  text-decoration: none;
  font-weight: 500;
  transition: opacity .2s;
}
.download-btn:hover {
  opacity: .9;
}
</style>

<div class="dashboard">
  <!-- Resume Text -->
  <div class="resume-panel">
    <h2>ðŸ“„ Extracted Resume</h2>
    <p>{{ highlighted_text|safe }}</p>
  </div>

  <!-- Job Recommendations -->
  <div class="jobs-panel">
    <h2>ðŸ”¥ Job Recommendations</h2>
    {% if jobs %}
      {% for job in jobs %}
        <div class="job-card">
          <h3>{{ job.title }}</h3>
          <p><strong>Company:</strong> {{ job.company }}</p>
          <p><strong>Location:</strong> {{ job.location }}</p>
          <p><strong>{{ job.match }}</strong></p>
          {% if "Match Score" in job.match %}
            {% set score = job.match.split(":")[1].replace("%","")|float %}
            <div class="progress-bar">
              <div class="progress" style="width:{{score}}%;"></div>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <p style="color:#555;">No recommendations found. Please refine your resume.</p>
    {% endif %}
    <a href="{{ url_for('download_pdf', filename=pdf_report) }}" class="download-btn">â¬‡ Download PDF</a>
  </div>
</div>
{% endblock %}
